(function(n,p){var l=function(d){var f=this;this.rpt=null;this.init=function(){var b=new XMLHttpRequest;b.open("GET",d.authServerUrl+"/realms/"+d.realm+"/.well-known/uma-configuration");b.onreadystatechange=function(){4==b.readyState&&(200==b.status?f.config=JSON.parse(b.responseText):console.error("Could not obtain configuration from server."))};b.send(null)};this.authorize=function(b){this.then=function(h,k,g){if(-1!=b.indexOf("UMA")){var e=b.split(",");for(i=0;i<e.length;i++){var a=e[i].split("\x3d");
if("ticket"==a[0]){var c=new XMLHttpRequest;c.open("POST",f.config.rpt_endpoint,!0);c.setRequestHeader("Content-Type","application/json");c.setRequestHeader("Authorization","Bearer "+d.token);c.onreadystatechange=function(){if(4==c.readyState){var a=c.status;200<=a&&300>a?(a=JSON.parse(c.responseText).rpt,f.rpt=a,h(a)):403==a?k?k():console.error("Authorization request was denied by the server."):g?g():console.error("Could not obtain authorization data from server.")}};a=a[1].substring(1,a[1].length-
1).trim();c.send(JSON.stringify({ticket:a,rpt:f.rpt}))}}}else if(-1!=b.indexOf("KC_ETT")){var e=b.substring(6).trim().split(","),m=null;for(i=0;i<e.length;i++)a=e[i].split("\x3d"),"realm"==a[0]&&(m=a[1].substring(1,a[1].length-1).trim());f.entitlement(m).then(h,k,g)}};return this};this.entitlement=function(b,h){this.then=function(k,g,e){var a=new XMLHttpRequest;a.onreadystatechange=function(){if(4==a.readyState){var b=a.status;200<=b&&300>b?(b=JSON.parse(a.responseText).rpt,f.rpt=b,k(b)):403==b?g?
g():console.error("Authorization request was denied by the server."):e?e():console.error("Could not obtain authorization data from server.")}};var c=null;h?(a.open("POST",d.authServerUrl+"/realms/"+d.realm+"/authz/entitlement/"+b,!0),a.setRequestHeader("Content-type","application/json"),c=JSON.stringify(h)):a.open("GET",d.authServerUrl+"/realms/"+d.realm+"/authz/entitlement/"+b,!0);a.setRequestHeader("Authorization","Bearer "+d.token);a.send(c)};return this};this.init(this)};"object"===typeof module&&
module&&"object"===typeof module.exports?module.exports=l:(n.KeycloakAuthorization=l,"function"===typeof define&&define.amd&&define("keycloak-authorization",[],function(){return l}))})(window);
//# sourceMappingURL=keycloak-authz.min.js.map